/*
Script generated by Aqua Data Studio 20.6.0-4 on Aug-02-2020 12:10:01 AM
Database: postgres
Schema: conversion
Objects: TABLE
*/
ALTER TABLE "conversion"."сurrency_value"
	DROP CONSTRAINT "constraint_name1" CASCADE 
GO
ALTER TABLE "conversion"."users_roles"
	DROP CONSTRAINT "users" CASCADE 
GO
ALTER TABLE "conversion"."users_roles"
	DROP CONSTRAINT "roles_fk" CASCADE 
GO
ALTER TABLE "conversion"."history"
	DROP CONSTRAINT "user_id_fk" CASCADE 
GO
ALTER TABLE "conversion"."history"
	DROP CONSTRAINT "constraint_name2" CASCADE 
GO
ALTER TABLE "conversion"."history"
	DROP CONSTRAINT "constraint_name1" CASCADE 
GO
DROP TABLE "conversion"."сurrency_value"
GO
DROP TABLE "conversion"."сurrency"
GO
DROP TABLE "conversion"."users_roles"
GO
DROP TABLE "conversion"."users"
GO
DROP TABLE "conversion"."roles"
GO
DROP TABLE "conversion"."history"
GO

CREATE TABLE "conversion"."history"  ( 
	"cur1_id"               	bigint NOT NULL,
	"cur2_id"               	bigint NOT NULL,
	"date"                  	date NOT NULL,
	"user_id"               	bigint NOT NULL,
	"id"                    	bigserial NOT NULL,
	"count_cur1"            	real NOT NULL,
	"count_cur2"            	real NOT NULL,
	"currency_value_by_date"	real NOT NULL,
	PRIMARY KEY("id")
)
GO
ALTER TABLE "conversion"."history" OWNER TO "postgres"
GO
CREATE TABLE "conversion"."roles"  ( 
	"id"  	bigserial NOT NULL,
	"name"	text NOT NULL,
	PRIMARY KEY("id")
)
GO
ALTER TABLE "conversion"."roles" OWNER TO "postgres"
GO
CREATE TABLE "conversion"."users"  ( 
	"second_name"	text NOT NULL,
	"password"   	text NOT NULL,
	"name"       	text NOT NULL,
	"first_name" 	text NOT NULL,
	"email"      	text NOT NULL,
	"id"         	bigserial NOT NULL,
	"status"     	text NULL,
	PRIMARY KEY("id")
)
GO
ALTER TABLE "conversion"."users" OWNER TO "postgres"
GO
CREATE TABLE "conversion"."users_roles"  ( 
	"user_id"	bigint NOT NULL,
	"role_id"	bigint NOT NULL 
	)
GO
ALTER TABLE "conversion"."users_roles" OWNER TO "postgres"
GO
CREATE TABLE "conversion"."сurrency"  ( 
	"id"       	real NOT NULL,
	"num_code" 	bigint NOT NULL,
	"char_code"	text NOT NULL,
	"nominal"  	smallint NOT NULL,
	"name"     	text NOT NULL,
	PRIMARY KEY("id")
)
GO
ALTER TABLE "conversion"."сurrency" OWNER TO "postgres"
GO
CREATE TABLE "conversion"."сurrency_value"  ( 
	"value"      	real NOT NULL,
	"date"       	date NOT NULL,
	"currency_id"	bigint NOT NULL,
	"id"         	bigserial NOT NULL,
	PRIMARY KEY("id")
)
GO
ALTER TABLE "conversion"."сurrency_value" OWNER TO "postgres"
GO

ALTER TABLE "conversion"."history"
	ADD CONSTRAINT "user_id_fk"
	FOREIGN KEY("user_id")
	REFERENCES "conversion"."users"("id")
	MATCH SIMPLE
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
GO
ALTER TABLE "conversion"."history"
	ADD CONSTRAINT "constraint_name2"
	FOREIGN KEY("cur2_id")
	REFERENCES "conversion"."сurrency"("id")
	MATCH SIMPLE
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
GO
ALTER TABLE "conversion"."history"
	ADD CONSTRAINT "constraint_name1"
	FOREIGN KEY("cur1_id")
	REFERENCES "conversion"."сurrency"("id")
	MATCH SIMPLE
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
GO
ALTER TABLE "conversion"."users_roles"
	ADD CONSTRAINT "users"
	FOREIGN KEY("user_id")
	REFERENCES "conversion"."users"("id")
	MATCH SIMPLE
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
GO
ALTER TABLE "conversion"."users_roles"
	ADD CONSTRAINT "roles_fk"
	FOREIGN KEY("role_id")
	REFERENCES "conversion"."roles"("id")
	MATCH SIMPLE
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
GO
ALTER TABLE "conversion"."сurrency_value"
	ADD CONSTRAINT "constraint_name1"
	FOREIGN KEY("currency_id")
	REFERENCES "conversion"."сurrency"("id")
	MATCH SIMPLE
	ON DELETE NO ACTION 
	ON UPDATE NO ACTION 
GO
